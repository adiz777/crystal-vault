<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Venezuela Government Staff Phone GPS Intel</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: #0a0a0a; color: #e0e0e0; }

        .header {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 20px 30px;
            border-bottom: 2px solid #ff3333;
        }
        .header h1 { color: #ff3333; font-size: 24px; margin-bottom: 5px; }
        .header p { color: #888; font-size: 14px; }

        .container { display: flex; height: calc(100vh - 80px); }

        #map { flex: 1; min-height: 500px; }

        .sidebar {
            width: 400px;
            background: #111;
            border-left: 1px solid #333;
            overflow-y: auto;
            padding: 20px;
        }

        .stats {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .stats h3 { color: #ff6b6b; margin-bottom: 10px; font-size: 14px; text-transform: uppercase; }
        .stat-row { display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px solid #222; }
        .stat-row:last-child { border-bottom: none; }
        .stat-label { color: #888; }
        .stat-value { color: #4ecdc4; font-weight: bold; }

        .photo-detail {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 15px;
            display: none;
        }
        .photo-detail.active { display: block; }
        .photo-detail h3 { color: #ff6b6b; margin-bottom: 15px; font-size: 14px; text-transform: uppercase; }

        .photo-preview {
            width: 100%;
            height: 200px;
            background: #0a0a0a;
            border-radius: 4px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        .photo-preview img { max-width: 100%; max-height: 100%; object-fit: contain; }
        .photo-preview .no-photo { color: #555; }

        .exif-data { font-size: 13px; }
        .exif-row {
            display: flex;
            padding: 8px 0;
            border-bottom: 1px solid #222;
        }
        .exif-label {
            color: #888;
            width: 100px;
            flex-shrink: 0;
            font-size: 11px;
            text-transform: uppercase;
        }
        .exif-value { color: #4ecdc4; word-break: break-all; }
        .exif-value.coords { color: #ff6b6b; font-family: monospace; }

        .location-list {
            margin-top: 20px;
        }
        .location-list h3 { color: #ff6b6b; margin-bottom: 10px; font-size: 14px; text-transform: uppercase; }
        .location-item {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .location-item:hover { border-color: #ff6b6b; background: #222; }
        .location-item.active { border-color: #ff6b6b; background: #2a1a1a; }
        .location-item .agency { color: #ff6b6b; font-weight: bold; font-size: 12px; }
        .location-item .phone { color: #4ecdc4; font-size: 11px; }
        .location-item .date { color: #666; font-size: 10px; margin-top: 3px; }

        .leaflet-popup-content-wrapper {
            background: #1a1a1a;
            color: #e0e0e0;
            border-radius: 8px;
        }
        .leaflet-popup-tip { background: #1a1a1a; }
        .popup-content { min-width: 200px; }
        .popup-content h4 { color: #ff6b6b; margin-bottom: 5px; }
        .popup-content p { font-size: 12px; margin: 3px 0; }
        .popup-content .coords { color: #4ecdc4; font-family: monospace; font-size: 11px; }

        .marker-cluster {
            background: rgba(255, 51, 51, 0.6);
            border-radius: 50%;
        }
        .marker-cluster div {
            background: #ff3333;
            color: white;
            border-radius: 50%;
            font-weight: bold;
        }

        @media (max-width: 900px) {
            .container { flex-direction: column; }
            .sidebar { width: 100%; height: 50vh; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>STAFF PHONE GPS INTEL</h1>
        <p>GPS coordinates extracted from EXIF data in photos taken by Venezuelan government employees</p>
    </div>

    <div class="container">
        <div id="map"></div>
        <div class="sidebar">
            <div class="stats">
                <h3>Intelligence Summary</h3>
                <div class="stat-row">
                    <span class="stat-label">Total Locations</span>
                    <span class="stat-value">12</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Agencies</span>
                    <span class="stat-value">INCES, AVN</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Phones Identified</span>
                    <span class="stat-value">5 devices</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Date Range</span>
                    <span class="stat-value">2022-05 to 2023-11</span>
                </div>
            </div>

            <div class="photo-detail" id="photoDetail">
                <h3>Photo EXIF Data</h3>
                <div class="photo-preview" id="photoPreview">
                    <span class="no-photo">Select a location</span>
                </div>
                <div class="exif-data" id="exifData"></div>
            </div>

            <div class="location-list">
                <h3>All Locations (12)</h3>
                <div id="locationList"></div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const locations = [
            {
                file: "AVN/AVN_43325.jpg",
                agency: "AVN",
                phone_make: "Xiaomi",
                phone_model: "Redmi Note 8 Pro",
                datetime: "2023-11-01 11:33:42",
                latitude: 10.274094416666667,
                longitude: -68.90948608333333,
                google_maps: "https://maps.google.com/?q=10.274094416666667,-68.90948608333333"
            },
            {
                file: "INCES/INCES_42575.jpg",
                agency: "INCES",
                phone_make: "Samsung",
                phone_model: "SM-J260MU",
                datetime: "Unknown",
                latitude: 11.355520805555555,
                longitude: -69.52191483333333,
                google_maps: "https://maps.google.com/?q=11.355520805555555,-69.52191483333333"
            },
            {
                file: "INCES/INCES_42646.jpg",
                agency: "INCES",
                phone_make: "Xiaomi",
                phone_model: "M2006C3LG",
                datetime: "2022-05-03 11:29:51",
                latitude: 8.631411527777779,
                longitude: -71.07752988888889,
                google_maps: "https://maps.google.com/?q=8.631411527777779,-71.07752988888889"
            },
            {
                file: "INCES/INCES_42954.jpg",
                agency: "INCES",
                phone_make: "Xiaomi",
                phone_model: "M2004J19C",
                datetime: "2022-05-18 15:10:59",
                latitude: 10.504424083333333,
                longitude: -66.91522216666667,
                google_maps: "https://maps.google.com/?q=10.504424083333333,-66.91522216666667"
            },
            {
                file: "INCES/INCES_43878.jpg",
                agency: "INCES",
                phone_make: "Xiaomi",
                phone_model: "M2006C3LG",
                datetime: "2022-06-15 10:55:42",
                latitude: 8.593620277777779,
                longitude: -71.14795683333334,
                google_maps: "https://maps.google.com/?q=8.593620277777779,-71.14795683333334"
            },
            {
                file: "INCES/INCES_44309.jpg",
                agency: "INCES",
                phone_make: "Xiaomi",
                phone_model: "M2004J19C",
                datetime: "2022-08-06 11:00:35",
                latitude: 10.484319666666666,
                longitude: -66.90579986111112,
                google_maps: "https://maps.google.com/?q=10.484319666666666,-66.90579986111112"
            },
            {
                file: "INCES/INCES_44310.jpg",
                agency: "INCES",
                phone_make: "Xiaomi",
                phone_model: "M2004J19C",
                datetime: "2022-08-06 10:48:43",
                latitude: 10.484464638888888,
                longitude: -66.90573880555556,
                google_maps: "https://maps.google.com/?q=10.484464638888888,-66.90573880555556"
            },
            {
                file: "INCES/INCES_69066.jpg",
                agency: "INCES",
                phone_make: "Xiaomi",
                phone_model: "Redmi A3x",
                datetime: "Unknown",
                latitude: 11.408856400000001,
                longitude: -69.6499685,
                google_maps: "https://maps.google.com/?q=11.408856400000001,-69.6499685"
            },
            {
                file: "INCES/INCES_69067.jpg",
                agency: "INCES",
                phone_make: "Xiaomi",
                phone_model: "Redmi A3x",
                datetime: "Unknown",
                latitude: 11.4088554,
                longitude: -69.64998940000001,
                google_maps: "https://maps.google.com/?q=11.4088554,-69.64998940000001"
            },
            {
                file: "INCES/INCES_69069.jpg",
                agency: "INCES",
                phone_make: "Xiaomi",
                phone_model: "Redmi A3x",
                datetime: "Unknown",
                latitude: 11.4088554,
                longitude: -69.64998940000001,
                google_maps: "https://maps.google.com/?q=11.4088554,-69.64998940000001"
            },
            {
                file: "INCES/INCES_69070.jpg",
                agency: "INCES",
                phone_make: "Xiaomi",
                phone_model: "Redmi A3x",
                datetime: "Unknown",
                latitude: 11.4088554,
                longitude: -69.64998940000001,
                google_maps: "https://maps.google.com/?q=11.4088554,-69.64998940000001"
            },
            {
                file: "INCES/INCES_69071.jpg",
                agency: "INCES",
                phone_make: "Xiaomi",
                phone_model: "Redmi A3x",
                datetime: "Unknown",
                latitude: 11.4088554,
                longitude: -69.64998940000001,
                google_maps: "https://maps.google.com/?q=11.4088554,-69.64998940000001"
            }
        ];

        // Initialize map centered on Venezuela
        const map = L.map('map').setView([9.5, -68.5], 7);

        // Dark tile layer
        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; OpenStreetMap &copy; CARTO',
            maxZoom: 19
        }).addTo(map);

        // Custom red marker icon
        const redIcon = L.divIcon({
            className: 'custom-marker',
            html: '<div style="background:#ff3333;width:12px;height:12px;border-radius:50%;border:2px solid #fff;box-shadow:0 0 10px rgba(255,51,51,0.8);"></div>',
            iconSize: [16, 16],
            iconAnchor: [8, 8]
        });

        const markers = [];
        const locationListEl = document.getElementById('locationList');

        // Add markers and list items
        locations.forEach((loc, index) => {
            // Create marker
            const marker = L.marker([loc.latitude, loc.longitude], { icon: redIcon }).addTo(map);

            // Popup content
            const popupContent = `
                <div class="popup-content">
                    <h4>${loc.agency}</h4>
                    <p><strong>Phone:</strong> ${loc.phone_make} ${loc.phone_model}</p>
                    <p><strong>Date:</strong> ${loc.datetime}</p>
                    <p class="coords">${loc.latitude.toFixed(6)}, ${loc.longitude.toFixed(6)}</p>
                </div>
            `;
            marker.bindPopup(popupContent);

            marker.on('click', () => selectLocation(index));
            markers.push(marker);

            // Create list item
            const listItem = document.createElement('div');
            listItem.className = 'location-item';
            listItem.dataset.index = index;
            listItem.innerHTML = `
                <div class="agency">${loc.agency} - ${loc.file.split('/')[1]}</div>
                <div class="phone">${loc.phone_make} ${loc.phone_model}</div>
                <div class="date">${loc.datetime}</div>
            `;
            listItem.addEventListener('click', () => selectLocation(index));
            locationListEl.appendChild(listItem);
        });

        // Fit map to all markers
        const group = L.featureGroup(markers);
        map.fitBounds(group.getBounds().pad(0.1));

        function selectLocation(index) {
            const loc = locations[index];

            // Update active states
            document.querySelectorAll('.location-item').forEach((item, i) => {
                item.classList.toggle('active', i === index);
            });

            // Show photo detail panel
            const detailPanel = document.getElementById('photoDetail');
            detailPanel.classList.add('active');

            // Update photo preview
            const preview = document.getElementById('photoPreview');
            const imgPath = `../media/${loc.file}`;
            preview.innerHTML = `<img src="${imgPath}" alt="${loc.file}" onerror="this.parentElement.innerHTML='<span class=\\'no-photo\\'>Photo: ${loc.file}</span>'">`;

            // Update EXIF data
            const exifData = document.getElementById('exifData');
            exifData.innerHTML = `
                <div class="exif-row">
                    <span class="exif-label">File</span>
                    <span class="exif-value">${loc.file}</span>
                </div>
                <div class="exif-row">
                    <span class="exif-label">Agency</span>
                    <span class="exif-value">${loc.agency}</span>
                </div>
                <div class="exif-row">
                    <span class="exif-label">Device</span>
                    <span class="exif-value">${loc.phone_make} ${loc.phone_model}</span>
                </div>
                <div class="exif-row">
                    <span class="exif-label">Date/Time</span>
                    <span class="exif-value">${loc.datetime}</span>
                </div>
                <div class="exif-row">
                    <span class="exif-label">Latitude</span>
                    <span class="exif-value coords">${loc.latitude.toFixed(8)}</span>
                </div>
                <div class="exif-row">
                    <span class="exif-label">Longitude</span>
                    <span class="exif-value coords">${loc.longitude.toFixed(8)}</span>
                </div>
                <div class="exif-row">
                    <span class="exif-label">Google Maps</span>
                    <span class="exif-value"><a href="${loc.google_maps}" target="_blank" style="color:#4ecdc4;">Open in Maps</a></span>
                </div>
            `;

            // Pan to marker and open popup
            map.setView([loc.latitude, loc.longitude], 12);
            markers[index].openPopup();
        }
    </script>
</body>
</html>
